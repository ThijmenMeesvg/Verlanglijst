<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verlanglijst â€“ Alle items</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Extra styling voor de preview-kaarten */
    .preview-card {
      margin-top: 1rem;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 10px;
      background: #262626;
      display: flex;
      gap: 1rem;
      align-items: center;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    .preview-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 20px rgba(255, 140, 66, 0.3);
    }

    .preview-card img {
      width: 100px;
      border-radius: 8px;
    }

    .preview-card h3 {
      margin: 0 0 .3rem 0;
      color: #FFD369;
    }

    .preview-card p {
      margin: 0;
      color: #EDEDED;
    }

    .preview-card.favorite {
      border: 2px solid #FF8C42;
      box-shadow: 0 0 20px rgba(255, 140, 66, 0.4);
      background-color: #2E2A25;
    }

    #filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      text-align: center;
    }

    #filters label, #filters input, #filters select, #filters button {
      font-size: 0.95rem;
    }

    #filters input, #filters select {
      padding: 5px;
      border-radius: 6px;
      border: 1px solid #555;
      background-color: #1E1E1E;
      color: #FFD369;
    }

    #filters button {
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
      background-color: #FF8C42;
      color: #1E1E1E;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    #filters button:hover {
      background-color: #FFD369;
      transform: scale(1.05);
    }
  </style>
</head>
<body>

<header>
  <h1>Mijn Verlanglijst</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="alle-items.html">Alle items</a>
    <a href="favorieten.html">Favorieten</a>
    <a href="boeken.html">Boeken</a>
    <a href="spelletjes.html">Spelletjes</a>
    <a href="muziek.html">Muziek</a>
    <a href="kleding.html">Kleding & Accessoires</a>
    <a href="uitzet.html">Uitzet</a>
    <a href="sport.html">Sport & Buiten</a>
    <a href="overig.html">Overig</a>
  </nav>
</header>

<main>
  <h2>Alle items</h2>

  <div id="filters">
    <label for="categoryFilter">Categorie:</label>
    <select id="categoryFilter">
      <option value="">Alles</option>
      <option>Boeken</option>
      <option>Muziek</option>
      <option>Spelletjes</option>
      <option>Kleding & Accesoires</option>
      <option>Uitzet</option>
      <option>Sport & Buiten</option>
      <option>Overig</option>
    </select>

    <label for="minPrice">Min prijs (â‚¬):</label>
    <input id="minPrice" type="number" min="0" step="0.01">

    <label for="maxPrice">Max prijs (â‚¬):</label>
    <input id="maxPrice" type="number" min="0" step="0.01">

    <button id="applyFilters">Filter toepassen</button>
  </div>

  <div id="item-container" class="grid"></div>
</main>

<script>
  async function loadItems(options = {}) {
    const container = document.getElementById("item-container");
    container.innerHTML = "Even laden...";

    try {
      const response = await fetch("data.json");
      const itemsByCategory = await response.json();

      let allItems = Object.entries(itemsByCategory).flatMap(([category, items]) =>
        items.map(i => ({ ...i, category }))
      );

      let filteredItems = allItems;

      if (options.category) filteredItems = filteredItems.filter(i => i.category === options.category);
      if (options.minPrice != null) filteredItems = filteredItems.filter(i => i.price >= options.minPrice);
      if (options.maxPrice != null) filteredItems = filteredItems.filter(i => i.price <= options.maxPrice);

      filteredItems.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));

      if (filteredItems.length === 0) {
        container.innerHTML = "<p>Geen items gevonden.</p>";
        return;
      }

      container.innerHTML = ""; // reset

      filteredItems.forEach(i => {
        const card = document.createElement("div");
        card.className = "preview-card" + (i.favorite ? " favorite" : "");

        if (i.image) {
          const img = document.createElement("img");
          img.src = i.image;
          img.alt = i.title;
          card.appendChild(img);
        }

        const info = document.createElement("div");
        info.innerHTML = `
          <h3>${i.title}</h3>
          <p>ðŸ’¶ â‚¬${i.price.toFixed(2)}</p>
          <a href="${i.link}" target="_blank" style="color:#2563eb;">Bekijk product</a>
          <p style="font-size:0.85rem;color:#AAA;margin-top:.3rem;">Categorie: ${i.category}</p>
        `;
        card.appendChild(info);

        container.appendChild(card);
      });

    } catch (error) {
      console.error(error);
      container.innerHTML = "<p>Fout bij het laden van de items.</p>";
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    const categorySelect = document.getElementById("categoryFilter");
    const minPriceInput = document.getElementById("minPrice");
    const maxPriceInput = document.getElementById("maxPrice");
    const applyBtn = document.getElementById("applyFilters");

    function applyFilters() {
      const category = categorySelect.value || null;
      const minPrice = minPriceInput.value ? parseFloat(minPriceInput.value) : null;
      const maxPrice = maxPriceInput.value ? parseFloat(maxPriceInput.value) : null;

      loadItems({ category, minPrice, maxPrice });
    }

    applyBtn.addEventListener("click", applyFilters);

    loadItems();
  });
</script>

</body>
</html>
